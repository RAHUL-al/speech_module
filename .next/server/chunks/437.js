exports.id=437,exports.ids=[437],exports.modules={182:(e,r,a)=>{"use strict";a.d(r,{Ay:()=>f,Ct:()=>y,K3:()=>d,LN:()=>p,Ww:()=>c,az:()=>n,hG:()=>o});var t=a(9317),s=a(8661);let n=(0,t.zD)("practice/initialize",async(e,{rejectWithValue:r})=>{try{return{paragraph:e}}catch(e){return r(e.response?.data?.message||"Failed to initialize practice")}}),o=(0,t.zD)("practice/fetchOverallScoring",async(e,{rejectWithValue:r})=>{try{return await (0,s.Vg)(`/overall-scoring-by-id?essay_id=${e}`)}catch(e){return r(e.response?.data?.message||"Failed to fetch overall scoring")}}),i={isRecording:!1,isAnalyzing:!1,analysisResults:null,error:null,paragraph:"",audioChunks:[],socket:null,mediaRecorder:null,stream:null},l=(0,t.Z0)({name:"practice",initialState:i,reducers:{startRecording:e=>{e.isRecording=!0},stopRecording:e=>{e.isRecording=!1,e.mediaRecorder&&e.mediaRecorder.stop(),e.stream&&e.stream.getTracks().forEach(e=>e.stop()),e.socket&&e.socket.close()},addAudioChunk:(e,r)=>{e.audioChunks.push(r.payload)},setAnalysisResults:(e,r)=>{e.analysisResults=r.payload,e.isAnalyzing=!1},setSocket:(e,r)=>{e.socket=r.payload},setMediaRecorder:(e,r)=>{e.mediaRecorder=r.payload},setStream:(e,r)=>{e.stream=r.payload},resetPracticeState:e=>{Object.assign(e,i)},setAnalyzing:(e,r)=>{e.isAnalyzing=r.payload}},extraReducers:e=>{e.addCase(n.pending,e=>{e.isAnalyzing=!0,e.error=null}).addCase(n.fulfilled,(e,r)=>{e.paragraph=r.payload.paragraph,e.isAnalyzing=!1}).addCase(n.rejected,(e,r)=>{e.isAnalyzing=!1,e.error=r.payload}).addCase(o.pending,e=>{e.isAnalyzing=!0,e.error=null}).addCase(o.fulfilled,(e,r)=>{e.isAnalyzing=!1,e.analysisResults=r.payload}).addCase(o.rejected,(e,r)=>{e.isAnalyzing=!1,e.error=r.payload})}}),{startRecording:d,stopRecording:c,addAudioChunk:u,setAnalysisResults:p,setSocket:g,setMediaRecorder:h,setStream:m,resetPracticeState:y}=l.actions,f=l.reducer},1135:()=>{},1565:(e,r,a)=>{"use strict";a.d(r,{Ay:()=>g,HX:()=>o,dk:()=>l,jN:()=>d,mM:()=>c,t:()=>u});var t=a(9317),s=a(8661);let n={class:null,subject:null,curriculum:null,isLoading:!1,error:null,ocrResults:{},progress:0},o=(0,t.zD)("teacher/processFiles",async(e,{getState:r,rejectWithValue:a,dispatch:t})=>{try{let{class:a,subject:n,curriculum:o}=r().teacher,i={};for(let r=0;r<e.length;r++){let l=e[r],d=new FormData;d.append("file",l),d.append("student_class",a||""),d.append("subject",n||""),d.append("curriculum",o||"");let c=Math.floor((r+1)/e.length*100);t(p(c));let u=await (0,s.$P)("/upload/",d);i[l.name]=u.data?.extracted_text||"No text"}return{results:i}}catch(r){console.error("Upload error:",r);let e="Processing failed";return r.response?e=r.response.data?.detail||r.response.statusText||`Server error: ${r.response.status}`:r.message&&(e=r.message),a(e)}}),i=(0,t.Z0)({name:"teacher",initialState:n,reducers:{setClass:(e,r)=>{e.class=r.payload},setSubject:(e,r)=>{e.subject=r.payload},setCurriculum:(e,r)=>{e.curriculum=r.payload},resetUpload:()=>n,setProgress:(e,r)=>{e.progress=r.payload}},extraReducers:e=>{e.addCase(o.pending,e=>{e.isLoading=!0,e.error=null,e.progress=0}).addCase(o.fulfilled,(e,r)=>{e.isLoading=!1,e.ocrResults=r.payload.results,e.progress=100}).addCase(o.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload,e.progress=0})}}),{setClass:l,setSubject:d,setCurriculum:c,resetUpload:u,setProgress:p}=i.actions,g=i.reducer},2756:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,6346,23)),Promise.resolve().then(a.t.bind(a,7924,23)),Promise.resolve().then(a.t.bind(a,5656,23)),Promise.resolve().then(a.t.bind(a,99,23)),Promise.resolve().then(a.t.bind(a,8243,23)),Promise.resolve().then(a.t.bind(a,8827,23)),Promise.resolve().then(a.t.bind(a,2763,23)),Promise.resolve().then(a.t.bind(a,7173,23))},2922:(e,r,a)=>{"use strict";a.d(r,{default:()=>t});let t=(0,a(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/ubuntu/src/app/provider.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/src/app/provider.tsx","default")},4241:(e,r,a)=>{"use strict";a.d(r,{Ay:()=>l,mU:()=>n});var t=a(9317),s=a(8661);let n=(0,t.zD)("paragraph/generateParagraph",async(e,{rejectWithValue:r})=>{try{let r={student_class:e.class,accent:e.accent,topic:e.topic,mood:e.mood},a=await (0,s.$P)("/generate-prompt",r);return{response:a.response,essay_id:a.essay_id}}catch(e){return r(e.response?.data?.message||"An error occurred")}}),o=(0,t.Z0)({name:"paragraph",initialState:{generatedParagraph:null,isLoading:!1,error:null,essayId:null},reducers:{resetParagraphState:e=>{e.generatedParagraph=null,e.isLoading=!1,e.error=null}},extraReducers:e=>{e.addCase(n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(n.fulfilled,(e,r)=>{e.isLoading=!1,e.generatedParagraph=r.payload.response,e.essayId=r.payload.essay_id}).addCase(n.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||r.error.message,e.generatedParagraph=null,e.essayId=null})}}),{resetParagraphState:i}=o.actions,l=o.reducer},4431:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>u,metadata:()=>c});var t=a(7413),s=a(2202),n=a.n(s),o=a(4988),i=a.n(o);a(1135);var l=a(2922),d=a(5625);let c={title:"Create Next App",description:"Generated by create next app"};function u({children:e}){return(0,t.jsx)("html",{lang:"en",children:(0,t.jsx)("body",{className:`${n().variable} ${i().variable} antialiased`,children:(0,t.jsxs)(l.default,{children:[e,(0,t.jsx)(d.Toaster,{position:"top-right"})]})})})}},5401:(e,r,a)=>{"use strict";a.d(r,{Ay:()=>h,DY:()=>o,Lx:()=>n,_d:()=>l,y4:()=>i});var t=a(9317),s=a(8661);let n=(0,t.zD)("/login",async(e,{rejectWithValue:r})=>{try{return await (0,s.$P)("/login",e)}catch(e){if(console.error("Auth slice: Login error:",e),e instanceof s.hD)return r({message:e.data?.detail||e.message,code:e.status});return r({message:e instanceof Error?e.message:"Login failed",code:500})}}),o=(0,t.zD)("auth/register",async(e,{rejectWithValue:r})=>{try{return await (0,s.$P)("/register",e)}catch(e){if(e instanceof s.hD)return r({message:e.data?.detail||e.message,code:e.status});return r({message:e instanceof Error?e.message:"Unknown error"})}}),i=(0,t.zD)("/logout",async(e,{rejectWithValue:r})=>{try{await (0,s.$P)("/logout");return}catch(e){return r(e.response?.data?.detail||"Logout failed")}}),l=(0,t.zD)("/verifyAuth",async(e,{rejectWithValue:r})=>{try{let e=localStorage.getItem("access_token");return console.log(e),!!e}catch(e){return r(e.response?.data?.detail||"Logout failed")}}),d=(0,t.Z0)({name:"auth",initialState:{user:null,tokens:null,username:null,isAuthenticated:!1,isLoading:!1,error:null},reducers:{clearError:e=>{e.error=null},setTokens:(e,r)=>{e.tokens=r.payload,e.isAuthenticated=!0,localStorage.setItem("access_token",r.payload.access_token)},clearAuth:e=>{e.user=null,e.tokens=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("access_token")},setUser:(e,r)=>{e.user=r.payload}},extraReducers:e=>{e.addCase(n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(n.fulfilled,(e,r)=>{e.isLoading=!1,e.user=r.payload.user,e.tokens=r.payload.tokens,e.isAuthenticated=!0,e.error=null,localStorage.setItem("access_token",r.payload.access_token),localStorage.setItem("username",r.payload.username)}).addCase(n.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload,e.isAuthenticated=!1,localStorage.removeItem("access_token")}),e.addCase(o.pending,e=>{e.isLoading=!0,e.error=null}).addCase(o.fulfilled,(e,r)=>{e.isLoading=!1,e.user=r.payload.user,e.tokens=r.payload.tokens,e.isAuthenticated=!1,e.error=null}).addCase(o.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload,e.isAuthenticated=!1,localStorage.removeItem("access_token")}),e.addCase(i.pending,e=>{e.isLoading=!0}).addCase(i.fulfilled,e=>{e.isLoading=!1,e.user=null,e.tokens=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("username")}).addCase(i.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload,e.user=null,e.tokens=null,e.isAuthenticated=!1,localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("username")}),e.addCase(l.pending,e=>{e.isLoading=!0}).addCase(l.fulfilled,(e,r)=>{e.isLoading=!1,e.isAuthenticated=r.payload}).addCase(l.rejected,e=>{e.isAuthenticated=!1})}}),{clearError:c,setTokens:u,clearAuth:p,setUser:g}=d.actions,h=d.reducer},5533:(e,r,a)=>{"use strict";a.d(r,{GV:()=>p,jL:()=>u,yO:()=>c});var t=a(9317),s=a(4864),n=a(5401),o=a(4241),i=a(182),l=a(1565),d=a(8619);function c(){return(0,t.U1)({reducer:{auth:n.Ay,paragraph:o.Ay,practice:i.Ay,teacher:l.Ay,chat:d.Ay},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}}),devTools:!1})}c();let u=()=>(0,s.wA)(),p=s.d4},6088:(e,r,a)=>{"use strict";a.d(r,{default:()=>i});var t=a(687),s=a(3210),n=a(4864),o=a(5533);function i({children:e}){let r=(0,s.useRef)(null);return r.current||(r.current=(0,o.yO)()),(0,t.jsx)(n.Kq,{store:r.current,children:e})}},7668:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,6444,23)),Promise.resolve().then(a.t.bind(a,6042,23)),Promise.resolve().then(a.t.bind(a,8170,23)),Promise.resolve().then(a.t.bind(a,9477,23)),Promise.resolve().then(a.t.bind(a,9345,23)),Promise.resolve().then(a.t.bind(a,2089,23)),Promise.resolve().then(a.t.bind(a,6577,23)),Promise.resolve().then(a.t.bind(a,1307,23))},7925:(e,r,a)=>{Promise.resolve().then(a.bind(a,5625)),Promise.resolve().then(a.bind(a,2922))},8197:(e,r,a)=>{Promise.resolve().then(a.bind(a,7590)),Promise.resolve().then(a.bind(a,6088))},8619:(e,r,a)=>{"use strict";a.d(r,{Ay:()=>i,SH:()=>o,gJ:()=>s});var t=a(9317);let s=(0,t.zD)("chat/sendMessage",async(e,{rejectWithValue:r})=>{try{let r={question:e.question,subject:e.subject||"",curriculum:e.curriculum||""},a=process.env.NEXT_PUBLIC_API_URL||"https://llm.edusmartai.com/api",t=await fetch(`${a}/chat/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),s=t.headers.get("content-type");if(!s||!s.includes("application/json")){let e=await t.text();throw Error(`Invalid response: ${e.substring(0,100)}`)}if(!t.ok){let e=await t.json();throw Error(e.detail||"Request failed")}return await t.json()}catch(e){return r(e.message||"An error occurred")}}),n=(0,t.Z0)({name:"chat",initialState:{status:"idle",error:null},reducers:{resetError:e=>{e.error=null}},extraReducers:e=>{e.addCase(s.pending,e=>{e.status="loading",e.error=null}).addCase(s.fulfilled,e=>{e.status="succeeded"}).addCase(s.rejected,(e,r)=>{e.status="failed",e.error=r.payload})}}),{resetError:o}=n.actions,i=n.reducer},8661:(e,r,a)=>{"use strict";a.d(r,{$P:()=>l,Vg:()=>i,hD:()=>s});let t=process.env.NEXT_PUBLIC_API_URL;class s extends Error{constructor(e,r,a){super(e),this.status=r,this.data=a}}let n=()=>null;async function o(e){if(401===e.status)return Promise.reject(new s("Session expired",401));if(!e.ok){let r={};try{r=await e.json()}catch(e){}throw new s(r.detail||r.message||"API Error",e.status,r)}return e.json()}async function i(e,r={}){let a=n(),s={"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},...r.headers||{}};return o(await fetch(`${t}${e}`,{method:"GET",headers:s,...r}))}async function l(e,r={},a={}){let i=n(),d=new AbortController,c=setTimeout(()=>d.abort(),3e5),u=new Headers;r instanceof FormData||u.set("Content-Type","application/json"),i&&u.set("Authorization",`Bearer ${i}`),a.headers&&(a.headers instanceof Headers?Array.from(a.headers.entries()):Array.isArray(a.headers)?a.headers:Object.entries(a.headers)).forEach(([e,r])=>{u.append(e,r)});let p=r instanceof FormData?r:JSON.stringify(r),{headers:g,...h}=a;try{let r=await fetch(`${t}${e}`,{method:"POST",headers:u,body:p,...h,signal:d.signal});if(!r.ok){let e={};try{e=await r.json()}catch(a){e={message:r.statusText}}throw new s(e.detail||e.message||"API Error",r.status,e)}return clearTimeout(c),o(r)}catch(e){if(clearTimeout(c),"AbortError"===e.name)throw new s("Request timed out",504);if(e instanceof s)throw e;throw new s(e instanceof Error?e.message:"Unknown error",500)}}}};